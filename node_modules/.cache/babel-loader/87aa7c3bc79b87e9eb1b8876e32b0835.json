{"ast":null,"code":"import _defineProperty from \"/Users/mac/Documents/WorkSpace/Pfizer/Capacitor/MyCapacitor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _createForOfIteratorHelper from \"/Users/mac/Documents/WorkSpace/Pfizer/Capacitor/MyCapacitor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _toConsumableArray from \"/Users/mac/Documents/WorkSpace/Pfizer/Capacitor/MyCapacitor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { r as raf } from './helpers-d8b49b57.js';\n/**\n * Web Animations requires hyphenated CSS properties\n * to be written in camelCase when animating\n */\n\nvar processKeyframes = function processKeyframes(keyframes) {\n  keyframes.forEach(function (keyframe) {\n    for (var key in keyframe) {\n      if (keyframe.hasOwnProperty(key)) {\n        var value = keyframe[key];\n\n        if (key === 'easing') {\n          var newKey = 'animation-timing-function';\n          keyframe[newKey] = value;\n          delete keyframe[key];\n        } else {\n          var _newKey = convertCamelCaseToHypen(key);\n\n          if (_newKey !== key) {\n            keyframe[_newKey] = value;\n            delete keyframe[key];\n          }\n        }\n      }\n    }\n  });\n  return keyframes;\n};\n\nvar convertCamelCaseToHypen = function convertCamelCaseToHypen(str) {\n  return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n};\n\nvar animationPrefix;\n\nvar getAnimationPrefix = function getAnimationPrefix(el) {\n  if (animationPrefix === undefined) {\n    var supportsUnprefixed = el.style.animationName !== undefined;\n    var supportsWebkitPrefix = el.style.webkitAnimationName !== undefined;\n    animationPrefix = !supportsUnprefixed && supportsWebkitPrefix ? '-webkit-' : '';\n  }\n\n  return animationPrefix;\n};\n\nvar setStyleProperty = function setStyleProperty(element, propertyName, value) {\n  var prefix = propertyName.startsWith('animation') ? getAnimationPrefix(element) : '';\n  element.style.setProperty(prefix + propertyName, value);\n};\n\nvar removeStyleProperty = function removeStyleProperty(element, propertyName) {\n  var prefix = propertyName.startsWith('animation') ? getAnimationPrefix(element) : '';\n  element.style.removeProperty(prefix + propertyName);\n};\n\nvar animationEnd = function animationEnd(el, callback) {\n  var unRegTrans;\n  var opts = {\n    passive: true\n  };\n\n  var unregister = function unregister() {\n    if (unRegTrans) {\n      unRegTrans();\n    }\n  };\n\n  var onTransitionEnd = function onTransitionEnd(ev) {\n    if (el === ev.target) {\n      unregister();\n      callback(ev);\n    }\n  };\n\n  if (el) {\n    el.addEventListener('webkitAnimationEnd', onTransitionEnd, opts);\n    el.addEventListener('animationend', onTransitionEnd, opts);\n\n    unRegTrans = function unRegTrans() {\n      el.removeEventListener('webkitAnimationEnd', onTransitionEnd, opts);\n      el.removeEventListener('animationend', onTransitionEnd, opts);\n    };\n  }\n\n  return unregister;\n};\n\nvar generateKeyframeRules = function generateKeyframeRules() {\n  var keyframes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return keyframes.map(function (keyframe) {\n    var offset = keyframe.offset;\n    var frameString = [];\n\n    for (var property in keyframe) {\n      if (keyframe.hasOwnProperty(property) && property !== 'offset') {\n        frameString.push(\"\".concat(property, \": \").concat(keyframe[property], \";\"));\n      }\n    }\n\n    return \"\".concat(offset * 100, \"% { \").concat(frameString.join(' '), \" }\");\n  }).join(' ');\n};\n\nvar keyframeIds = [];\n\nvar generateKeyframeName = function generateKeyframeName(keyframeRules) {\n  var index = keyframeIds.indexOf(keyframeRules);\n\n  if (index < 0) {\n    index = keyframeIds.push(keyframeRules) - 1;\n  }\n\n  return \"ion-animation-\".concat(index);\n};\n\nvar getStyleContainer = function getStyleContainer(element) {\n  var rootNode = element.getRootNode();\n  return rootNode.head || rootNode;\n};\n\nvar createKeyframeStylesheet = function createKeyframeStylesheet(keyframeName, keyframeRules, element) {\n  var styleContainer = getStyleContainer(element);\n  var keyframePrefix = getAnimationPrefix(element);\n  var existingStylesheet = styleContainer.querySelector('#' + keyframeName);\n\n  if (existingStylesheet) {\n    return existingStylesheet;\n  }\n\n  var stylesheet = (element.ownerDocument || document).createElement('style');\n  stylesheet.id = keyframeName;\n  stylesheet.textContent = \"@\".concat(keyframePrefix, \"keyframes \").concat(keyframeName, \" { \").concat(keyframeRules, \" } @\").concat(keyframePrefix, \"keyframes \").concat(keyframeName, \"-alt { \").concat(keyframeRules, \" }\");\n  styleContainer.appendChild(stylesheet);\n  return stylesheet;\n};\n\nvar addClassToArray = function addClassToArray() {\n  var classes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var className = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (className !== undefined) {\n    var classNameToAppend = Array.isArray(className) ? className : [className];\n    return [].concat(_toConsumableArray(classes), _toConsumableArray(classNameToAppend));\n  }\n\n  return classes;\n}; // TODO: Add more tests. until then, be sure to manually test menu and swipe to go back/routing transitions\n\n\nvar createAnimation = function createAnimation(animationId) {\n  var _delay;\n\n  var _duration;\n\n  var _easing;\n\n  var _iterations;\n\n  var _fill;\n\n  var _direction;\n\n  var _keyframes = [];\n  var beforeAddClasses = [];\n  var beforeRemoveClasses = [];\n  var initialized = false;\n  var parentAnimation;\n  var beforeStylesValue = {};\n  var afterAddClasses = [];\n  var afterRemoveClasses = [];\n  var afterStylesValue = {};\n  var numAnimationsRunning = 0;\n  var shouldForceLinearEasing = false;\n  var shouldForceSyncPlayback = false;\n  var cssAnimationsTimerFallback;\n  var forceDirectionValue;\n  var forceDurationValue;\n  var forceDelayValue;\n  var willComplete = true;\n  var finished = false;\n  var shouldCalculateNumAnimations = true;\n  var keyframeName;\n  var ani;\n  var id = animationId;\n  var onFinishCallbacks = [];\n  var onFinishOneTimeCallbacks = [];\n  var elements = [];\n  var childAnimations = [];\n  var stylesheets = [];\n  var _beforeAddReadFunctions = [];\n  var _beforeAddWriteFunctions = [];\n  var _afterAddReadFunctions = [];\n  var _afterAddWriteFunctions = [];\n  var webAnimations = [];\n  var supportsAnimationEffect = typeof AnimationEffect === 'function' || typeof window.AnimationEffect === 'function';\n  var supportsWebAnimations = typeof Element === 'function' && typeof Element.prototype.animate === 'function' && supportsAnimationEffect;\n  var ANIMATION_END_FALLBACK_PADDING_MS = 100;\n\n  var getWebAnimations = function getWebAnimations() {\n    return webAnimations;\n  };\n\n  var destroy = function destroy() {\n    childAnimations.forEach(function (childAnimation) {\n      childAnimation.destroy();\n    });\n    cleanUp();\n    elements.length = 0;\n    childAnimations.length = 0;\n    _keyframes.length = 0;\n    clearOnFinish();\n    initialized = false;\n    shouldCalculateNumAnimations = true;\n    return ani;\n  };\n  /**\n   * Cancels any Web Animations, removes\n   * any animation properties from the\n   * animation's elements, and removes the\n   * animation's stylesheets from the DOM.\n   */\n\n\n  var cleanUp = function cleanUp() {\n    cleanUpElements();\n    cleanUpStyleSheets();\n  };\n\n  var resetFlags = function resetFlags() {\n    shouldForceLinearEasing = false;\n    shouldForceSyncPlayback = false;\n    shouldCalculateNumAnimations = true;\n    forceDirectionValue = undefined;\n    forceDurationValue = undefined;\n    forceDelayValue = undefined;\n    numAnimationsRunning = 0;\n    finished = false;\n    willComplete = true;\n  };\n\n  var onFinish = function onFinish(callback, opts) {\n    var callbacks = opts && opts.oneTimeCallback ? onFinishOneTimeCallbacks : onFinishCallbacks;\n    callbacks.push({\n      c: callback,\n      o: opts\n    });\n    return ani;\n  };\n\n  var clearOnFinish = function clearOnFinish() {\n    onFinishCallbacks.length = 0;\n    onFinishOneTimeCallbacks.length = 0;\n    return ani;\n  };\n  /**\n   * Cancels any Web Animations and removes\n   * any animation properties from the\n   * the animation's elements.\n   */\n\n\n  var cleanUpElements = function cleanUpElements() {\n    if (supportsWebAnimations) {\n      webAnimations.forEach(function (animation) {\n        animation.cancel();\n      });\n      webAnimations.length = 0;\n    } else {\n      var elementsArray = elements.slice();\n      raf(function () {\n        elementsArray.forEach(function (element) {\n          removeStyleProperty(element, 'animation-name');\n          removeStyleProperty(element, 'animation-duration');\n          removeStyleProperty(element, 'animation-timing-function');\n          removeStyleProperty(element, 'animation-iteration-count');\n          removeStyleProperty(element, 'animation-delay');\n          removeStyleProperty(element, 'animation-play-state');\n          removeStyleProperty(element, 'animation-fill-mode');\n          removeStyleProperty(element, 'animation-direction');\n        });\n      });\n    }\n  };\n  /**\n   * Removes the animation's stylesheets\n   * from the DOM.\n   */\n\n\n  var cleanUpStyleSheets = function cleanUpStyleSheets() {\n    stylesheets.forEach(function (stylesheet) {\n      /**\n       * When sharing stylesheets, it's possible\n       * for another animation to have already\n       * cleaned up a particular stylesheet\n       */\n      if (stylesheet && stylesheet.parentNode) {\n        stylesheet.parentNode.removeChild(stylesheet);\n      }\n    });\n    stylesheets.length = 0;\n  };\n\n  var beforeAddRead = function beforeAddRead(readFn) {\n    _beforeAddReadFunctions.push(readFn);\n\n    return ani;\n  };\n\n  var beforeAddWrite = function beforeAddWrite(writeFn) {\n    _beforeAddWriteFunctions.push(writeFn);\n\n    return ani;\n  };\n\n  var afterAddRead = function afterAddRead(readFn) {\n    _afterAddReadFunctions.push(readFn);\n\n    return ani;\n  };\n\n  var afterAddWrite = function afterAddWrite(writeFn) {\n    _afterAddWriteFunctions.push(writeFn);\n\n    return ani;\n  };\n\n  var beforeAddClass = function beforeAddClass(className) {\n    beforeAddClasses = addClassToArray(beforeAddClasses, className);\n    return ani;\n  };\n\n  var beforeRemoveClass = function beforeRemoveClass(className) {\n    beforeRemoveClasses = addClassToArray(beforeRemoveClasses, className);\n    return ani;\n  };\n  /**\n   * Set CSS inline styles to the animation's\n   * elements before the animation begins.\n   */\n\n\n  var beforeStyles = function beforeStyles() {\n    var styles = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    beforeStylesValue = styles;\n    return ani;\n  };\n  /**\n   * Clear CSS inline styles from the animation's\n   * elements before the animation begins.\n   */\n\n\n  var beforeClearStyles = function beforeClearStyles() {\n    var propertyNames = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    var _iterator = _createForOfIteratorHelper(propertyNames),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var property = _step.value;\n        beforeStylesValue[property] = '';\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return ani;\n  };\n\n  var afterAddClass = function afterAddClass(className) {\n    afterAddClasses = addClassToArray(afterAddClasses, className);\n    return ani;\n  };\n\n  var afterRemoveClass = function afterRemoveClass(className) {\n    afterRemoveClasses = addClassToArray(afterRemoveClasses, className);\n    return ani;\n  };\n\n  var afterStyles = function afterStyles() {\n    var styles = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    afterStylesValue = styles;\n    return ani;\n  };\n\n  var afterClearStyles = function afterClearStyles() {\n    var propertyNames = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    var _iterator2 = _createForOfIteratorHelper(propertyNames),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var property = _step2.value;\n        afterStylesValue[property] = '';\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    return ani;\n  };\n\n  var getFill = function getFill() {\n    if (_fill !== undefined) {\n      return _fill;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getFill();\n    }\n\n    return 'both';\n  };\n\n  var getDirection = function getDirection() {\n    if (forceDirectionValue !== undefined) {\n      return forceDirectionValue;\n    }\n\n    if (_direction !== undefined) {\n      return _direction;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getDirection();\n    }\n\n    return 'normal';\n  };\n\n  var getEasing = function getEasing() {\n    if (shouldForceLinearEasing) {\n      return 'linear';\n    }\n\n    if (_easing !== undefined) {\n      return _easing;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getEasing();\n    }\n\n    return 'linear';\n  };\n\n  var getDuration = function getDuration() {\n    if (shouldForceSyncPlayback) {\n      return 0;\n    }\n\n    if (forceDurationValue !== undefined) {\n      return forceDurationValue;\n    }\n\n    if (_duration !== undefined) {\n      return _duration;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getDuration();\n    }\n\n    return 0;\n  };\n\n  var getIterations = function getIterations() {\n    if (_iterations !== undefined) {\n      return _iterations;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getIterations();\n    }\n\n    return 1;\n  };\n\n  var getDelay = function getDelay() {\n    if (forceDelayValue !== undefined) {\n      return forceDelayValue;\n    }\n\n    if (_delay !== undefined) {\n      return _delay;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getDelay();\n    }\n\n    return 0;\n  };\n\n  var getKeyframes = function getKeyframes() {\n    return _keyframes;\n  };\n\n  var direction = function direction(animationDirection) {\n    _direction = animationDirection;\n    update(true);\n    return ani;\n  };\n\n  var fill = function fill(animationFill) {\n    _fill = animationFill;\n    update(true);\n    return ani;\n  };\n\n  var delay = function delay(animationDelay) {\n    _delay = animationDelay;\n    update(true);\n    return ani;\n  };\n\n  var easing = function easing(animationEasing) {\n    _easing = animationEasing;\n    update(true);\n    return ani;\n  };\n\n  var duration = function duration(animationDuration) {\n    /**\n     * CSS Animation Durations of 0ms work fine on Chrome\n     * but do not run on Safari, so force it to 1ms to\n     * get it to run on both platforms.\n     */\n    if (!supportsWebAnimations && animationDuration === 0) {\n      animationDuration = 1;\n    }\n\n    _duration = animationDuration;\n    update(true);\n    return ani;\n  };\n\n  var iterations = function iterations(animationIterations) {\n    _iterations = animationIterations;\n    update(true);\n    return ani;\n  };\n\n  var parent = function parent(animation) {\n    parentAnimation = animation;\n    return ani;\n  };\n\n  var addElement = function addElement(el) {\n    if (el != null) {\n      if (el.nodeType === 1) {\n        elements.push(el);\n      } else if (el.length >= 0) {\n        for (var i = 0; i < el.length; i++) {\n          elements.push(el[i]);\n        }\n      } else {\n        console.error('Invalid addElement value');\n      }\n    }\n\n    return ani;\n  };\n\n  var addAnimation = function addAnimation(animationToAdd) {\n    if (animationToAdd != null) {\n      if (Array.isArray(animationToAdd)) {\n        var _iterator3 = _createForOfIteratorHelper(animationToAdd),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var animation = _step3.value;\n            animation.parent(ani);\n            childAnimations.push(animation);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      } else {\n        animationToAdd.parent(ani);\n        childAnimations.push(animationToAdd);\n      }\n    }\n\n    return ani;\n  };\n\n  var keyframes = function keyframes(keyframeValues) {\n    _keyframes = keyframeValues;\n    return ani;\n  };\n  /**\n   * Run all \"before\" animation hooks.\n   */\n\n\n  var beforeAnimation = function beforeAnimation() {\n    // Runs all before read callbacks\n    _beforeAddReadFunctions.forEach(function (callback) {\n      return callback();\n    }); // Runs all before write callbacks\n\n\n    _beforeAddWriteFunctions.forEach(function (callback) {\n      return callback();\n    }); // Updates styles and classes before animation runs\n\n\n    var addClasses = beforeAddClasses;\n    var removeClasses = beforeRemoveClasses;\n    var styles = beforeStylesValue;\n    elements.forEach(function (el) {\n      var elementClassList = el.classList;\n      addClasses.forEach(function (c) {\n        return elementClassList.add(c);\n      });\n      removeClasses.forEach(function (c) {\n        return elementClassList.remove(c);\n      });\n\n      for (var property in styles) {\n        if (styles.hasOwnProperty(property)) {\n          setStyleProperty(el, property, styles[property]);\n        }\n      }\n    });\n  };\n  /**\n   * Run all \"after\" animation hooks.\n   */\n\n\n  var afterAnimation = function afterAnimation() {\n    clearCSSAnimationsTimeout(); // Runs all after read callbacks\n\n    _afterAddReadFunctions.forEach(function (callback) {\n      return callback();\n    }); // Runs all after write callbacks\n\n\n    _afterAddWriteFunctions.forEach(function (callback) {\n      return callback();\n    }); // Updates styles and classes before animation ends\n\n\n    var currentStep = willComplete ? 1 : 0;\n    var addClasses = afterAddClasses;\n    var removeClasses = afterRemoveClasses;\n    var styles = afterStylesValue;\n    elements.forEach(function (el) {\n      var elementClassList = el.classList;\n      addClasses.forEach(function (c) {\n        return elementClassList.add(c);\n      });\n      removeClasses.forEach(function (c) {\n        return elementClassList.remove(c);\n      });\n\n      for (var property in styles) {\n        if (styles.hasOwnProperty(property)) {\n          setStyleProperty(el, property, styles[property]);\n        }\n      }\n    });\n    onFinishCallbacks.forEach(function (onFinishCallback) {\n      return onFinishCallback.c(currentStep, ani);\n    });\n    onFinishOneTimeCallbacks.forEach(function (onFinishCallback) {\n      return onFinishCallback.c(currentStep, ani);\n    });\n    onFinishOneTimeCallbacks.length = 0;\n    shouldCalculateNumAnimations = true;\n\n    if (willComplete) {\n      finished = true;\n    }\n\n    willComplete = true;\n  };\n\n  var animationFinish = function animationFinish() {\n    if (numAnimationsRunning === 0) {\n      return;\n    }\n\n    numAnimationsRunning--;\n\n    if (numAnimationsRunning === 0) {\n      afterAnimation();\n\n      if (parentAnimation) {\n        parentAnimation.animationFinish();\n      }\n    }\n  };\n\n  var initializeCSSAnimation = function initializeCSSAnimation() {\n    var toggleAnimationName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    cleanUpStyleSheets();\n    var processedKeyframes = processKeyframes(_keyframes);\n    elements.forEach(function (element) {\n      if (processedKeyframes.length > 0) {\n        var keyframeRules = generateKeyframeRules(processedKeyframes);\n        keyframeName = animationId !== undefined ? animationId : generateKeyframeName(keyframeRules);\n        var stylesheet = createKeyframeStylesheet(keyframeName, keyframeRules, element);\n        stylesheets.push(stylesheet);\n        setStyleProperty(element, 'animation-duration', \"\".concat(getDuration(), \"ms\"));\n        setStyleProperty(element, 'animation-timing-function', getEasing());\n        setStyleProperty(element, 'animation-delay', \"\".concat(getDelay(), \"ms\"));\n        setStyleProperty(element, 'animation-fill-mode', getFill());\n        setStyleProperty(element, 'animation-direction', getDirection());\n        var iterationsCount = getIterations() === Infinity ? 'infinite' : getIterations().toString();\n        setStyleProperty(element, 'animation-iteration-count', iterationsCount);\n        setStyleProperty(element, 'animation-play-state', 'paused');\n\n        if (toggleAnimationName) {\n          setStyleProperty(element, 'animation-name', \"\".concat(stylesheet.id, \"-alt\"));\n        }\n\n        raf(function () {\n          setStyleProperty(element, 'animation-name', stylesheet.id || null);\n        });\n      }\n    });\n  };\n\n  var initializeWebAnimation = function initializeWebAnimation() {\n    elements.forEach(function (element) {\n      var animation = element.animate(_keyframes, {\n        id: id,\n        delay: getDelay(),\n        duration: getDuration(),\n        easing: getEasing(),\n        iterations: getIterations(),\n        fill: getFill(),\n        direction: getDirection()\n      });\n      animation.pause();\n      webAnimations.push(animation);\n    });\n\n    if (webAnimations.length > 0) {\n      webAnimations[0].onfinish = function () {\n        animationFinish();\n      };\n    }\n  };\n\n  var initializeAnimation = function initializeAnimation() {\n    var toggleAnimationName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    beforeAnimation();\n\n    if (_keyframes.length > 0) {\n      if (supportsWebAnimations) {\n        initializeWebAnimation();\n      } else {\n        initializeCSSAnimation(toggleAnimationName);\n      }\n    }\n\n    initialized = true;\n  };\n\n  var setAnimationStep = function setAnimationStep(step) {\n    step = Math.min(Math.max(step, 0), 0.9999);\n\n    if (supportsWebAnimations) {\n      webAnimations.forEach(function (animation) {\n        animation.currentTime = animation.effect.getComputedTiming().delay + getDuration() * step;\n        animation.pause();\n      });\n    } else {\n      var animationDuration = \"-\".concat(getDuration() * step, \"ms\");\n      elements.forEach(function (element) {\n        if (_keyframes.length > 0) {\n          setStyleProperty(element, 'animation-delay', animationDuration);\n          setStyleProperty(element, 'animation-play-state', 'paused');\n        }\n      });\n    }\n  };\n\n  var updateWebAnimation = function updateWebAnimation(step) {\n    webAnimations.forEach(function (animation) {\n      animation.effect.updateTiming({\n        delay: getDelay(),\n        duration: getDuration(),\n        easing: getEasing(),\n        iterations: getIterations(),\n        fill: getFill(),\n        direction: getDirection()\n      });\n    });\n\n    if (step !== undefined) {\n      setAnimationStep(step);\n    }\n  };\n\n  var updateCSSAnimation = function updateCSSAnimation() {\n    var toggleAnimationName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var step = arguments.length > 1 ? arguments[1] : undefined;\n    raf(function () {\n      elements.forEach(function (element) {\n        setStyleProperty(element, 'animation-name', keyframeName || null);\n        setStyleProperty(element, 'animation-duration', \"\".concat(getDuration(), \"ms\"));\n        setStyleProperty(element, 'animation-timing-function', getEasing());\n        setStyleProperty(element, 'animation-delay', step !== undefined ? \"-\".concat(step * getDuration(), \"ms\") : \"\".concat(getDelay(), \"ms\"));\n        setStyleProperty(element, 'animation-fill-mode', getFill() || null);\n        setStyleProperty(element, 'animation-direction', getDirection() || null);\n        var iterationsCount = getIterations() === Infinity ? 'infinite' : getIterations().toString();\n        setStyleProperty(element, 'animation-iteration-count', iterationsCount);\n\n        if (toggleAnimationName) {\n          setStyleProperty(element, 'animation-name', \"\".concat(keyframeName, \"-alt\"));\n        }\n\n        raf(function () {\n          setStyleProperty(element, 'animation-name', keyframeName || null);\n        });\n      });\n    });\n  };\n\n  var update = function update() {\n    var deep = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var toggleAnimationName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var step = arguments.length > 2 ? arguments[2] : undefined;\n\n    if (deep) {\n      childAnimations.forEach(function (animation) {\n        animation.update(deep, toggleAnimationName, step);\n      });\n    }\n\n    if (supportsWebAnimations) {\n      updateWebAnimation(step);\n    } else {\n      updateCSSAnimation(toggleAnimationName, step);\n    }\n\n    return ani;\n  };\n\n  var progressStart = function progressStart() {\n    var forceLinearEasing = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var step = arguments.length > 1 ? arguments[1] : undefined;\n    childAnimations.forEach(function (animation) {\n      animation.progressStart(forceLinearEasing, step);\n    });\n    pauseAnimation();\n    shouldForceLinearEasing = forceLinearEasing;\n\n    if (!initialized) {\n      initializeAnimation();\n    } else {\n      update(false, true, step);\n    }\n\n    return ani;\n  };\n\n  var progressStep = function progressStep(step) {\n    childAnimations.forEach(function (animation) {\n      animation.progressStep(step);\n    });\n    setAnimationStep(step);\n    return ani;\n  };\n\n  var progressEnd = function progressEnd(playTo, step, dur) {\n    shouldForceLinearEasing = false;\n    childAnimations.forEach(function (animation) {\n      animation.progressEnd(playTo, step, dur);\n    });\n\n    if (dur !== undefined) {\n      forceDurationValue = dur;\n    }\n\n    finished = false; // tslint:disable-next-line: strict-boolean-conditions\n\n    willComplete = true;\n\n    if (playTo === 0) {\n      forceDirectionValue = getDirection() === 'reverse' ? 'normal' : 'reverse';\n\n      if (forceDirectionValue === 'reverse') {\n        willComplete = false;\n      }\n\n      if (supportsWebAnimations) {\n        update();\n        setAnimationStep(1 - step);\n      } else {\n        forceDelayValue = (1 - step) * getDuration() * -1;\n        update(false, false);\n      }\n    } else if (playTo === 1) {\n      if (supportsWebAnimations) {\n        update();\n        setAnimationStep(step);\n      } else {\n        forceDelayValue = step * getDuration() * -1;\n        update(false, false);\n      }\n    }\n\n    if (playTo !== undefined) {\n      onFinish(function () {\n        forceDurationValue = undefined;\n        forceDirectionValue = undefined;\n        forceDelayValue = undefined;\n      }, {\n        oneTimeCallback: true\n      });\n\n      if (!parentAnimation) {\n        play();\n      }\n    }\n\n    return ani;\n  };\n\n  var pauseAnimation = function pauseAnimation() {\n    if (initialized) {\n      if (supportsWebAnimations) {\n        webAnimations.forEach(function (animation) {\n          animation.pause();\n        });\n      } else {\n        elements.forEach(function (element) {\n          setStyleProperty(element, 'animation-play-state', 'paused');\n        });\n      }\n    }\n  };\n\n  var pause = function pause() {\n    childAnimations.forEach(function (animation) {\n      animation.pause();\n    });\n    pauseAnimation();\n    return ani;\n  };\n\n  var onAnimationEndFallback = function onAnimationEndFallback() {\n    cssAnimationsTimerFallback = undefined;\n    animationFinish();\n  };\n\n  var clearCSSAnimationsTimeout = function clearCSSAnimationsTimeout() {\n    if (cssAnimationsTimerFallback) {\n      clearTimeout(cssAnimationsTimerFallback);\n    }\n  };\n\n  var playCSSAnimations = function playCSSAnimations() {\n    clearCSSAnimationsTimeout();\n    raf(function () {\n      elements.forEach(function (element) {\n        if (_keyframes.length > 0) {\n          setStyleProperty(element, 'animation-play-state', 'running');\n        }\n      });\n    });\n\n    if (_keyframes.length === 0 || elements.length === 0) {\n      animationFinish();\n    } else {\n      /**\n       * This is a catchall in the event that a CSS Animation did not finish.\n       * The Web Animations API has mechanisms in place for preventing this.\n       * CSS Animations will not fire an `animationend` event\n       * for elements with `display: none`. The Web Animations API\n       * accounts for this, but using raw CSS Animations requires\n       * this workaround.\n       */\n      var animationDelay = getDelay() || 0;\n      var animationDuration = getDuration() || 0;\n      var animationIterations = getIterations() || 1; // No need to set a timeout when animation has infinite iterations\n\n      if (isFinite(animationIterations)) {\n        cssAnimationsTimerFallback = setTimeout(onAnimationEndFallback, animationDelay + animationDuration * animationIterations + ANIMATION_END_FALLBACK_PADDING_MS);\n      }\n\n      animationEnd(elements[0], function () {\n        clearCSSAnimationsTimeout();\n        /**\n         * Ensure that clean up\n         * is always done a frame\n         * before the onFinish handlers\n         * are fired. Otherwise, there\n         * may be flickering if a new\n         * animation is started on the same\n         * element too quickly\n         *\n         * TODO: Is there a cleaner way to do this?\n         */\n\n        raf(function () {\n          clearCSSAnimationPlayState();\n          raf(animationFinish);\n        });\n      });\n    }\n  };\n\n  var clearCSSAnimationPlayState = function clearCSSAnimationPlayState() {\n    elements.forEach(function (element) {\n      removeStyleProperty(element, 'animation-duration');\n      removeStyleProperty(element, 'animation-delay');\n      removeStyleProperty(element, 'animation-play-state');\n    });\n  };\n\n  var playWebAnimations = function playWebAnimations() {\n    webAnimations.forEach(function (animation) {\n      animation.play();\n    });\n\n    if (_keyframes.length === 0 || elements.length === 0) {\n      animationFinish();\n    }\n  };\n\n  var resetAnimation = function resetAnimation() {\n    if (supportsWebAnimations) {\n      setAnimationStep(0);\n      updateWebAnimation();\n    } else {\n      updateCSSAnimation();\n    }\n  };\n\n  var play = function play(opts) {\n    return new Promise(function (resolve) {\n      if (opts && opts.sync) {\n        shouldForceSyncPlayback = true;\n        onFinish(function () {\n          return shouldForceSyncPlayback = false;\n        }, {\n          oneTimeCallback: true\n        });\n      }\n\n      if (!initialized) {\n        initializeAnimation();\n      }\n\n      if (finished) {\n        resetAnimation();\n        finished = false;\n      }\n\n      if (shouldCalculateNumAnimations) {\n        numAnimationsRunning = childAnimations.length + 1;\n        shouldCalculateNumAnimations = false;\n      }\n\n      onFinish(function () {\n        return resolve();\n      }, {\n        oneTimeCallback: true\n      });\n      childAnimations.forEach(function (animation) {\n        animation.play();\n      });\n\n      if (supportsWebAnimations) {\n        playWebAnimations();\n      } else {\n        playCSSAnimations();\n      }\n    });\n  };\n\n  var stop = function stop() {\n    childAnimations.forEach(function (animation) {\n      animation.stop();\n    });\n\n    if (initialized) {\n      cleanUpElements();\n      initialized = false;\n    }\n\n    resetFlags();\n  };\n\n  var from = function from(property, value) {\n    var firstFrame = _keyframes[0];\n\n    if (firstFrame !== undefined && (firstFrame.offset === undefined || firstFrame.offset === 0)) {\n      firstFrame[property] = value;\n    } else {\n      _keyframes = [_defineProperty({\n        offset: 0\n      }, property, value)].concat(_toConsumableArray(_keyframes));\n    }\n\n    return ani;\n  };\n\n  var to = function to(property, value) {\n    var lastFrame = _keyframes[_keyframes.length - 1];\n\n    if (lastFrame !== undefined && (lastFrame.offset === undefined || lastFrame.offset === 1)) {\n      lastFrame[property] = value;\n    } else {\n      _keyframes = [].concat(_toConsumableArray(_keyframes), [_defineProperty({\n        offset: 1\n      }, property, value)]);\n    }\n\n    return ani;\n  };\n\n  var fromTo = function fromTo(property, fromValue, toValue) {\n    return from(property, fromValue).to(property, toValue);\n  };\n\n  return ani = {\n    parentAnimation: parentAnimation,\n    elements: elements,\n    childAnimations: childAnimations,\n    id: id,\n    animationFinish: animationFinish,\n    from: from,\n    to: to,\n    fromTo: fromTo,\n    parent: parent,\n    play: play,\n    pause: pause,\n    stop: stop,\n    destroy: destroy,\n    keyframes: keyframes,\n    addAnimation: addAnimation,\n    addElement: addElement,\n    update: update,\n    fill: fill,\n    direction: direction,\n    iterations: iterations,\n    duration: duration,\n    easing: easing,\n    delay: delay,\n    getWebAnimations: getWebAnimations,\n    getKeyframes: getKeyframes,\n    getFill: getFill,\n    getDirection: getDirection,\n    getDelay: getDelay,\n    getIterations: getIterations,\n    getEasing: getEasing,\n    getDuration: getDuration,\n    afterAddRead: afterAddRead,\n    afterAddWrite: afterAddWrite,\n    afterClearStyles: afterClearStyles,\n    afterStyles: afterStyles,\n    afterRemoveClass: afterRemoveClass,\n    afterAddClass: afterAddClass,\n    beforeAddRead: beforeAddRead,\n    beforeAddWrite: beforeAddWrite,\n    beforeClearStyles: beforeClearStyles,\n    beforeStyles: beforeStyles,\n    beforeRemoveClass: beforeRemoveClass,\n    beforeAddClass: beforeAddClass,\n    onFinish: onFinish,\n    progressStart: progressStart,\n    progressStep: progressStep,\n    progressEnd: progressEnd\n  };\n};\n\nexport { createAnimation as c };","map":{"version":3,"sources":["/Users/mac/Documents/WorkSpace/Pfizer/Capacitor/MyCapacitor/node_modules/@ionic/core/dist/esm-es5/animation-f72ade61.js"],"names":["r","raf","processKeyframes","keyframes","forEach","keyframe","key","hasOwnProperty","value","newKey","convertCamelCaseToHypen","str","replace","toLowerCase","animationPrefix","getAnimationPrefix","el","undefined","supportsUnprefixed","style","animationName","supportsWebkitPrefix","webkitAnimationName","setStyleProperty","element","propertyName","prefix","startsWith","setProperty","removeStyleProperty","removeProperty","animationEnd","callback","unRegTrans","opts","passive","unregister","onTransitionEnd","ev","target","addEventListener","removeEventListener","generateKeyframeRules","map","offset","frameString","property","push","join","keyframeIds","generateKeyframeName","keyframeRules","index","indexOf","getStyleContainer","rootNode","getRootNode","head","createKeyframeStylesheet","keyframeName","styleContainer","keyframePrefix","existingStylesheet","querySelector","stylesheet","ownerDocument","document","createElement","id","textContent","appendChild","addClassToArray","classes","className","classNameToAppend","Array","isArray","createAnimation","animationId","_delay","_duration","_easing","_iterations","_fill","_direction","_keyframes","beforeAddClasses","beforeRemoveClasses","initialized","parentAnimation","beforeStylesValue","afterAddClasses","afterRemoveClasses","afterStylesValue","numAnimationsRunning","shouldForceLinearEasing","shouldForceSyncPlayback","cssAnimationsTimerFallback","forceDirectionValue","forceDurationValue","forceDelayValue","willComplete","finished","shouldCalculateNumAnimations","ani","onFinishCallbacks","onFinishOneTimeCallbacks","elements","childAnimations","stylesheets","_beforeAddReadFunctions","_beforeAddWriteFunctions","_afterAddReadFunctions","_afterAddWriteFunctions","webAnimations","supportsAnimationEffect","AnimationEffect","window","supportsWebAnimations","Element","prototype","animate","ANIMATION_END_FALLBACK_PADDING_MS","getWebAnimations","destroy","childAnimation","cleanUp","length","clearOnFinish","cleanUpElements","cleanUpStyleSheets","resetFlags","onFinish","callbacks","oneTimeCallback","c","o","animation","cancel","elementsArray","slice","parentNode","removeChild","beforeAddRead","readFn","beforeAddWrite","writeFn","afterAddRead","afterAddWrite","beforeAddClass","beforeRemoveClass","beforeStyles","styles","beforeClearStyles","propertyNames","afterAddClass","afterRemoveClass","afterStyles","afterClearStyles","getFill","getDirection","getEasing","getDuration","getIterations","getDelay","getKeyframes","direction","animationDirection","update","fill","animationFill","delay","animationDelay","easing","animationEasing","duration","animationDuration","iterations","animationIterations","parent","addElement","nodeType","i","console","error","addAnimation","animationToAdd","keyframeValues","beforeAnimation","addClasses","removeClasses","elementClassList","classList","add","remove","afterAnimation","clearCSSAnimationsTimeout","currentStep","onFinishCallback","animationFinish","initializeCSSAnimation","toggleAnimationName","processedKeyframes","iterationsCount","Infinity","toString","initializeWebAnimation","pause","onfinish","initializeAnimation","setAnimationStep","step","Math","min","max","currentTime","effect","getComputedTiming","updateWebAnimation","updateTiming","updateCSSAnimation","deep","progressStart","forceLinearEasing","pauseAnimation","progressStep","progressEnd","playTo","dur","play","onAnimationEndFallback","clearTimeout","playCSSAnimations","isFinite","setTimeout","clearCSSAnimationPlayState","playWebAnimations","resetAnimation","Promise","resolve","sync","stop","from","firstFrame","to","lastFrame","fromTo","fromValue","toValue"],"mappings":"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","sourcesContent":["import { r as raf } from './helpers-d8b49b57.js';\n\n/**\n * Web Animations requires hyphenated CSS properties\n * to be written in camelCase when animating\n */\nconst processKeyframes = (keyframes) => {\n    keyframes.forEach(keyframe => {\n        for (const key in keyframe) {\n            if (keyframe.hasOwnProperty(key)) {\n                const value = keyframe[key];\n                if (key === 'easing') {\n                    const newKey = 'animation-timing-function';\n                    keyframe[newKey] = value;\n                    delete keyframe[key];\n                }\n                else {\n                    const newKey = convertCamelCaseToHypen(key);\n                    if (newKey !== key) {\n                        keyframe[newKey] = value;\n                        delete keyframe[key];\n                    }\n                }\n            }\n        }\n    });\n    return keyframes;\n};\nconst convertCamelCaseToHypen = (str) => {\n    return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n};\nlet animationPrefix;\nconst getAnimationPrefix = (el) => {\n    if (animationPrefix === undefined) {\n        const supportsUnprefixed = el.style.animationName !== undefined;\n        const supportsWebkitPrefix = el.style.webkitAnimationName !== undefined;\n        animationPrefix = (!supportsUnprefixed && supportsWebkitPrefix) ? '-webkit-' : '';\n    }\n    return animationPrefix;\n};\nconst setStyleProperty = (element, propertyName, value) => {\n    const prefix = propertyName.startsWith('animation') ? getAnimationPrefix(element) : '';\n    element.style.setProperty(prefix + propertyName, value);\n};\nconst removeStyleProperty = (element, propertyName) => {\n    const prefix = propertyName.startsWith('animation') ? getAnimationPrefix(element) : '';\n    element.style.removeProperty(prefix + propertyName);\n};\nconst animationEnd = (el, callback) => {\n    let unRegTrans;\n    const opts = { passive: true };\n    const unregister = () => {\n        if (unRegTrans) {\n            unRegTrans();\n        }\n    };\n    const onTransitionEnd = (ev) => {\n        if (el === ev.target) {\n            unregister();\n            callback(ev);\n        }\n    };\n    if (el) {\n        el.addEventListener('webkitAnimationEnd', onTransitionEnd, opts);\n        el.addEventListener('animationend', onTransitionEnd, opts);\n        unRegTrans = () => {\n            el.removeEventListener('webkitAnimationEnd', onTransitionEnd, opts);\n            el.removeEventListener('animationend', onTransitionEnd, opts);\n        };\n    }\n    return unregister;\n};\nconst generateKeyframeRules = (keyframes = []) => {\n    return keyframes.map(keyframe => {\n        const offset = keyframe.offset;\n        const frameString = [];\n        for (const property in keyframe) {\n            if (keyframe.hasOwnProperty(property) && property !== 'offset') {\n                frameString.push(`${property}: ${keyframe[property]};`);\n            }\n        }\n        return `${offset * 100}% { ${frameString.join(' ')} }`;\n    }).join(' ');\n};\nconst keyframeIds = [];\nconst generateKeyframeName = (keyframeRules) => {\n    let index = keyframeIds.indexOf(keyframeRules);\n    if (index < 0) {\n        index = (keyframeIds.push(keyframeRules) - 1);\n    }\n    return `ion-animation-${index}`;\n};\nconst getStyleContainer = (element) => {\n    const rootNode = element.getRootNode();\n    return (rootNode.head || rootNode);\n};\nconst createKeyframeStylesheet = (keyframeName, keyframeRules, element) => {\n    const styleContainer = getStyleContainer(element);\n    const keyframePrefix = getAnimationPrefix(element);\n    const existingStylesheet = styleContainer.querySelector('#' + keyframeName);\n    if (existingStylesheet) {\n        return existingStylesheet;\n    }\n    const stylesheet = (element.ownerDocument || document).createElement('style');\n    stylesheet.id = keyframeName;\n    stylesheet.textContent = `@${keyframePrefix}keyframes ${keyframeName} { ${keyframeRules} } @${keyframePrefix}keyframes ${keyframeName}-alt { ${keyframeRules} }`;\n    styleContainer.appendChild(stylesheet);\n    return stylesheet;\n};\nconst addClassToArray = (classes = [], className) => {\n    if (className !== undefined) {\n        const classNameToAppend = (Array.isArray(className)) ? className : [className];\n        return [...classes, ...classNameToAppend];\n    }\n    return classes;\n};\n\n// TODO: Add more tests. until then, be sure to manually test menu and swipe to go back/routing transitions\nconst createAnimation = (animationId) => {\n    let _delay;\n    let _duration;\n    let _easing;\n    let _iterations;\n    let _fill;\n    let _direction;\n    let _keyframes = [];\n    let beforeAddClasses = [];\n    let beforeRemoveClasses = [];\n    let initialized = false;\n    let parentAnimation;\n    let beforeStylesValue = {};\n    let afterAddClasses = [];\n    let afterRemoveClasses = [];\n    let afterStylesValue = {};\n    let numAnimationsRunning = 0;\n    let shouldForceLinearEasing = false;\n    let shouldForceSyncPlayback = false;\n    let cssAnimationsTimerFallback;\n    let forceDirectionValue;\n    let forceDurationValue;\n    let forceDelayValue;\n    let willComplete = true;\n    let finished = false;\n    let shouldCalculateNumAnimations = true;\n    let keyframeName;\n    let ani;\n    const id = animationId;\n    const onFinishCallbacks = [];\n    const onFinishOneTimeCallbacks = [];\n    const elements = [];\n    const childAnimations = [];\n    const stylesheets = [];\n    const _beforeAddReadFunctions = [];\n    const _beforeAddWriteFunctions = [];\n    const _afterAddReadFunctions = [];\n    const _afterAddWriteFunctions = [];\n    const webAnimations = [];\n    const supportsAnimationEffect = (typeof AnimationEffect === 'function' || typeof window.AnimationEffect === 'function');\n    const supportsWebAnimations = (typeof Element === 'function') && (typeof Element.prototype.animate === 'function') && supportsAnimationEffect;\n    const ANIMATION_END_FALLBACK_PADDING_MS = 100;\n    const getWebAnimations = () => {\n        return webAnimations;\n    };\n    const destroy = () => {\n        childAnimations.forEach(childAnimation => {\n            childAnimation.destroy();\n        });\n        cleanUp();\n        elements.length = 0;\n        childAnimations.length = 0;\n        _keyframes.length = 0;\n        clearOnFinish();\n        initialized = false;\n        shouldCalculateNumAnimations = true;\n        return ani;\n    };\n    /**\n     * Cancels any Web Animations, removes\n     * any animation properties from the\n     * animation's elements, and removes the\n     * animation's stylesheets from the DOM.\n     */\n    const cleanUp = () => {\n        cleanUpElements();\n        cleanUpStyleSheets();\n    };\n    const resetFlags = () => {\n        shouldForceLinearEasing = false;\n        shouldForceSyncPlayback = false;\n        shouldCalculateNumAnimations = true;\n        forceDirectionValue = undefined;\n        forceDurationValue = undefined;\n        forceDelayValue = undefined;\n        numAnimationsRunning = 0;\n        finished = false;\n        willComplete = true;\n    };\n    const onFinish = (callback, opts) => {\n        const callbacks = (opts && opts.oneTimeCallback) ? onFinishOneTimeCallbacks : onFinishCallbacks;\n        callbacks.push({ c: callback, o: opts });\n        return ani;\n    };\n    const clearOnFinish = () => {\n        onFinishCallbacks.length = 0;\n        onFinishOneTimeCallbacks.length = 0;\n        return ani;\n    };\n    /**\n     * Cancels any Web Animations and removes\n     * any animation properties from the\n     * the animation's elements.\n     */\n    const cleanUpElements = () => {\n        if (supportsWebAnimations) {\n            webAnimations.forEach(animation => {\n                animation.cancel();\n            });\n            webAnimations.length = 0;\n        }\n        else {\n            const elementsArray = elements.slice();\n            raf(() => {\n                elementsArray.forEach(element => {\n                    removeStyleProperty(element, 'animation-name');\n                    removeStyleProperty(element, 'animation-duration');\n                    removeStyleProperty(element, 'animation-timing-function');\n                    removeStyleProperty(element, 'animation-iteration-count');\n                    removeStyleProperty(element, 'animation-delay');\n                    removeStyleProperty(element, 'animation-play-state');\n                    removeStyleProperty(element, 'animation-fill-mode');\n                    removeStyleProperty(element, 'animation-direction');\n                });\n            });\n        }\n    };\n    /**\n     * Removes the animation's stylesheets\n     * from the DOM.\n     */\n    const cleanUpStyleSheets = () => {\n        stylesheets.forEach(stylesheet => {\n            /**\n             * When sharing stylesheets, it's possible\n             * for another animation to have already\n             * cleaned up a particular stylesheet\n             */\n            if (stylesheet && stylesheet.parentNode) {\n                stylesheet.parentNode.removeChild(stylesheet);\n            }\n        });\n        stylesheets.length = 0;\n    };\n    const beforeAddRead = (readFn) => {\n        _beforeAddReadFunctions.push(readFn);\n        return ani;\n    };\n    const beforeAddWrite = (writeFn) => {\n        _beforeAddWriteFunctions.push(writeFn);\n        return ani;\n    };\n    const afterAddRead = (readFn) => {\n        _afterAddReadFunctions.push(readFn);\n        return ani;\n    };\n    const afterAddWrite = (writeFn) => {\n        _afterAddWriteFunctions.push(writeFn);\n        return ani;\n    };\n    const beforeAddClass = (className) => {\n        beforeAddClasses = addClassToArray(beforeAddClasses, className);\n        return ani;\n    };\n    const beforeRemoveClass = (className) => {\n        beforeRemoveClasses = addClassToArray(beforeRemoveClasses, className);\n        return ani;\n    };\n    /**\n     * Set CSS inline styles to the animation's\n     * elements before the animation begins.\n     */\n    const beforeStyles = (styles = {}) => {\n        beforeStylesValue = styles;\n        return ani;\n    };\n    /**\n     * Clear CSS inline styles from the animation's\n     * elements before the animation begins.\n     */\n    const beforeClearStyles = (propertyNames = []) => {\n        for (const property of propertyNames) {\n            beforeStylesValue[property] = '';\n        }\n        return ani;\n    };\n    const afterAddClass = (className) => {\n        afterAddClasses = addClassToArray(afterAddClasses, className);\n        return ani;\n    };\n    const afterRemoveClass = (className) => {\n        afterRemoveClasses = addClassToArray(afterRemoveClasses, className);\n        return ani;\n    };\n    const afterStyles = (styles = {}) => {\n        afterStylesValue = styles;\n        return ani;\n    };\n    const afterClearStyles = (propertyNames = []) => {\n        for (const property of propertyNames) {\n            afterStylesValue[property] = '';\n        }\n        return ani;\n    };\n    const getFill = () => {\n        if (_fill !== undefined) {\n            return _fill;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getFill();\n        }\n        return 'both';\n    };\n    const getDirection = () => {\n        if (forceDirectionValue !== undefined) {\n            return forceDirectionValue;\n        }\n        if (_direction !== undefined) {\n            return _direction;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getDirection();\n        }\n        return 'normal';\n    };\n    const getEasing = () => {\n        if (shouldForceLinearEasing) {\n            return 'linear';\n        }\n        if (_easing !== undefined) {\n            return _easing;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getEasing();\n        }\n        return 'linear';\n    };\n    const getDuration = () => {\n        if (shouldForceSyncPlayback) {\n            return 0;\n        }\n        if (forceDurationValue !== undefined) {\n            return forceDurationValue;\n        }\n        if (_duration !== undefined) {\n            return _duration;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getDuration();\n        }\n        return 0;\n    };\n    const getIterations = () => {\n        if (_iterations !== undefined) {\n            return _iterations;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getIterations();\n        }\n        return 1;\n    };\n    const getDelay = () => {\n        if (forceDelayValue !== undefined) {\n            return forceDelayValue;\n        }\n        if (_delay !== undefined) {\n            return _delay;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getDelay();\n        }\n        return 0;\n    };\n    const getKeyframes = () => {\n        return _keyframes;\n    };\n    const direction = (animationDirection) => {\n        _direction = animationDirection;\n        update(true);\n        return ani;\n    };\n    const fill = (animationFill) => {\n        _fill = animationFill;\n        update(true);\n        return ani;\n    };\n    const delay = (animationDelay) => {\n        _delay = animationDelay;\n        update(true);\n        return ani;\n    };\n    const easing = (animationEasing) => {\n        _easing = animationEasing;\n        update(true);\n        return ani;\n    };\n    const duration = (animationDuration) => {\n        /**\n         * CSS Animation Durations of 0ms work fine on Chrome\n         * but do not run on Safari, so force it to 1ms to\n         * get it to run on both platforms.\n         */\n        if (!supportsWebAnimations && animationDuration === 0) {\n            animationDuration = 1;\n        }\n        _duration = animationDuration;\n        update(true);\n        return ani;\n    };\n    const iterations = (animationIterations) => {\n        _iterations = animationIterations;\n        update(true);\n        return ani;\n    };\n    const parent = (animation) => {\n        parentAnimation = animation;\n        return ani;\n    };\n    const addElement = (el) => {\n        if (el != null) {\n            if (el.nodeType === 1) {\n                elements.push(el);\n            }\n            else if (el.length >= 0) {\n                for (let i = 0; i < el.length; i++) {\n                    elements.push(el[i]);\n                }\n            }\n            else {\n                console.error('Invalid addElement value');\n            }\n        }\n        return ani;\n    };\n    const addAnimation = (animationToAdd) => {\n        if (animationToAdd != null) {\n            if (Array.isArray(animationToAdd)) {\n                for (const animation of animationToAdd) {\n                    animation.parent(ani);\n                    childAnimations.push(animation);\n                }\n            }\n            else {\n                animationToAdd.parent(ani);\n                childAnimations.push(animationToAdd);\n            }\n        }\n        return ani;\n    };\n    const keyframes = (keyframeValues) => {\n        _keyframes = keyframeValues;\n        return ani;\n    };\n    /**\n     * Run all \"before\" animation hooks.\n     */\n    const beforeAnimation = () => {\n        // Runs all before read callbacks\n        _beforeAddReadFunctions.forEach(callback => callback());\n        // Runs all before write callbacks\n        _beforeAddWriteFunctions.forEach(callback => callback());\n        // Updates styles and classes before animation runs\n        const addClasses = beforeAddClasses;\n        const removeClasses = beforeRemoveClasses;\n        const styles = beforeStylesValue;\n        elements.forEach(el => {\n            const elementClassList = el.classList;\n            addClasses.forEach(c => elementClassList.add(c));\n            removeClasses.forEach(c => elementClassList.remove(c));\n            for (const property in styles) {\n                if (styles.hasOwnProperty(property)) {\n                    setStyleProperty(el, property, styles[property]);\n                }\n            }\n        });\n    };\n    /**\n     * Run all \"after\" animation hooks.\n     */\n    const afterAnimation = () => {\n        clearCSSAnimationsTimeout();\n        // Runs all after read callbacks\n        _afterAddReadFunctions.forEach(callback => callback());\n        // Runs all after write callbacks\n        _afterAddWriteFunctions.forEach(callback => callback());\n        // Updates styles and classes before animation ends\n        const currentStep = willComplete ? 1 : 0;\n        const addClasses = afterAddClasses;\n        const removeClasses = afterRemoveClasses;\n        const styles = afterStylesValue;\n        elements.forEach(el => {\n            const elementClassList = el.classList;\n            addClasses.forEach(c => elementClassList.add(c));\n            removeClasses.forEach(c => elementClassList.remove(c));\n            for (const property in styles) {\n                if (styles.hasOwnProperty(property)) {\n                    setStyleProperty(el, property, styles[property]);\n                }\n            }\n        });\n        onFinishCallbacks.forEach(onFinishCallback => {\n            return onFinishCallback.c(currentStep, ani);\n        });\n        onFinishOneTimeCallbacks.forEach(onFinishCallback => {\n            return onFinishCallback.c(currentStep, ani);\n        });\n        onFinishOneTimeCallbacks.length = 0;\n        shouldCalculateNumAnimations = true;\n        if (willComplete) {\n            finished = true;\n        }\n        willComplete = true;\n    };\n    const animationFinish = () => {\n        if (numAnimationsRunning === 0) {\n            return;\n        }\n        numAnimationsRunning--;\n        if (numAnimationsRunning === 0) {\n            afterAnimation();\n            if (parentAnimation) {\n                parentAnimation.animationFinish();\n            }\n        }\n    };\n    const initializeCSSAnimation = (toggleAnimationName = true) => {\n        cleanUpStyleSheets();\n        const processedKeyframes = processKeyframes(_keyframes);\n        elements.forEach(element => {\n            if (processedKeyframes.length > 0) {\n                const keyframeRules = generateKeyframeRules(processedKeyframes);\n                keyframeName = (animationId !== undefined) ? animationId : generateKeyframeName(keyframeRules);\n                const stylesheet = createKeyframeStylesheet(keyframeName, keyframeRules, element);\n                stylesheets.push(stylesheet);\n                setStyleProperty(element, 'animation-duration', `${getDuration()}ms`);\n                setStyleProperty(element, 'animation-timing-function', getEasing());\n                setStyleProperty(element, 'animation-delay', `${getDelay()}ms`);\n                setStyleProperty(element, 'animation-fill-mode', getFill());\n                setStyleProperty(element, 'animation-direction', getDirection());\n                const iterationsCount = (getIterations() === Infinity)\n                    ? 'infinite'\n                    : getIterations().toString();\n                setStyleProperty(element, 'animation-iteration-count', iterationsCount);\n                setStyleProperty(element, 'animation-play-state', 'paused');\n                if (toggleAnimationName) {\n                    setStyleProperty(element, 'animation-name', `${stylesheet.id}-alt`);\n                }\n                raf(() => {\n                    setStyleProperty(element, 'animation-name', stylesheet.id || null);\n                });\n            }\n        });\n    };\n    const initializeWebAnimation = () => {\n        elements.forEach(element => {\n            const animation = element.animate(_keyframes, {\n                id,\n                delay: getDelay(),\n                duration: getDuration(),\n                easing: getEasing(),\n                iterations: getIterations(),\n                fill: getFill(),\n                direction: getDirection()\n            });\n            animation.pause();\n            webAnimations.push(animation);\n        });\n        if (webAnimations.length > 0) {\n            webAnimations[0].onfinish = () => {\n                animationFinish();\n            };\n        }\n    };\n    const initializeAnimation = (toggleAnimationName = true) => {\n        beforeAnimation();\n        if (_keyframes.length > 0) {\n            if (supportsWebAnimations) {\n                initializeWebAnimation();\n            }\n            else {\n                initializeCSSAnimation(toggleAnimationName);\n            }\n        }\n        initialized = true;\n    };\n    const setAnimationStep = (step) => {\n        step = Math.min(Math.max(step, 0), 0.9999);\n        if (supportsWebAnimations) {\n            webAnimations.forEach(animation => {\n                animation.currentTime = animation.effect.getComputedTiming().delay + (getDuration() * step);\n                animation.pause();\n            });\n        }\n        else {\n            const animationDuration = `-${getDuration() * step}ms`;\n            elements.forEach(element => {\n                if (_keyframes.length > 0) {\n                    setStyleProperty(element, 'animation-delay', animationDuration);\n                    setStyleProperty(element, 'animation-play-state', 'paused');\n                }\n            });\n        }\n    };\n    const updateWebAnimation = (step) => {\n        webAnimations.forEach(animation => {\n            animation.effect.updateTiming({\n                delay: getDelay(),\n                duration: getDuration(),\n                easing: getEasing(),\n                iterations: getIterations(),\n                fill: getFill(),\n                direction: getDirection()\n            });\n        });\n        if (step !== undefined) {\n            setAnimationStep(step);\n        }\n    };\n    const updateCSSAnimation = (toggleAnimationName = true, step) => {\n        raf(() => {\n            elements.forEach(element => {\n                setStyleProperty(element, 'animation-name', keyframeName || null);\n                setStyleProperty(element, 'animation-duration', `${getDuration()}ms`);\n                setStyleProperty(element, 'animation-timing-function', getEasing());\n                setStyleProperty(element, 'animation-delay', (step !== undefined) ? `-${step * getDuration()}ms` : `${getDelay()}ms`);\n                setStyleProperty(element, 'animation-fill-mode', getFill() || null);\n                setStyleProperty(element, 'animation-direction', getDirection() || null);\n                const iterationsCount = (getIterations() === Infinity)\n                    ? 'infinite'\n                    : getIterations().toString();\n                setStyleProperty(element, 'animation-iteration-count', iterationsCount);\n                if (toggleAnimationName) {\n                    setStyleProperty(element, 'animation-name', `${keyframeName}-alt`);\n                }\n                raf(() => {\n                    setStyleProperty(element, 'animation-name', keyframeName || null);\n                });\n            });\n        });\n    };\n    const update = (deep = false, toggleAnimationName = true, step) => {\n        if (deep) {\n            childAnimations.forEach(animation => {\n                animation.update(deep, toggleAnimationName, step);\n            });\n        }\n        if (supportsWebAnimations) {\n            updateWebAnimation(step);\n        }\n        else {\n            updateCSSAnimation(toggleAnimationName, step);\n        }\n        return ani;\n    };\n    const progressStart = (forceLinearEasing = false, step) => {\n        childAnimations.forEach(animation => {\n            animation.progressStart(forceLinearEasing, step);\n        });\n        pauseAnimation();\n        shouldForceLinearEasing = forceLinearEasing;\n        if (!initialized) {\n            initializeAnimation();\n        }\n        else {\n            update(false, true, step);\n        }\n        return ani;\n    };\n    const progressStep = (step) => {\n        childAnimations.forEach(animation => {\n            animation.progressStep(step);\n        });\n        setAnimationStep(step);\n        return ani;\n    };\n    const progressEnd = (playTo, step, dur) => {\n        shouldForceLinearEasing = false;\n        childAnimations.forEach(animation => {\n            animation.progressEnd(playTo, step, dur);\n        });\n        if (dur !== undefined) {\n            forceDurationValue = dur;\n        }\n        finished = false;\n        // tslint:disable-next-line: strict-boolean-conditions\n        willComplete = true;\n        if (playTo === 0) {\n            forceDirectionValue = (getDirection() === 'reverse') ? 'normal' : 'reverse';\n            if (forceDirectionValue === 'reverse') {\n                willComplete = false;\n            }\n            if (supportsWebAnimations) {\n                update();\n                setAnimationStep(1 - step);\n            }\n            else {\n                forceDelayValue = ((1 - step) * getDuration()) * -1;\n                update(false, false);\n            }\n        }\n        else if (playTo === 1) {\n            if (supportsWebAnimations) {\n                update();\n                setAnimationStep(step);\n            }\n            else {\n                forceDelayValue = (step * getDuration()) * -1;\n                update(false, false);\n            }\n        }\n        if (playTo !== undefined) {\n            onFinish(() => {\n                forceDurationValue = undefined;\n                forceDirectionValue = undefined;\n                forceDelayValue = undefined;\n            }, {\n                oneTimeCallback: true\n            });\n            if (!parentAnimation) {\n                play();\n            }\n        }\n        return ani;\n    };\n    const pauseAnimation = () => {\n        if (initialized) {\n            if (supportsWebAnimations) {\n                webAnimations.forEach(animation => {\n                    animation.pause();\n                });\n            }\n            else {\n                elements.forEach(element => {\n                    setStyleProperty(element, 'animation-play-state', 'paused');\n                });\n            }\n        }\n    };\n    const pause = () => {\n        childAnimations.forEach(animation => {\n            animation.pause();\n        });\n        pauseAnimation();\n        return ani;\n    };\n    const onAnimationEndFallback = () => {\n        cssAnimationsTimerFallback = undefined;\n        animationFinish();\n    };\n    const clearCSSAnimationsTimeout = () => {\n        if (cssAnimationsTimerFallback) {\n            clearTimeout(cssAnimationsTimerFallback);\n        }\n    };\n    const playCSSAnimations = () => {\n        clearCSSAnimationsTimeout();\n        raf(() => {\n            elements.forEach(element => {\n                if (_keyframes.length > 0) {\n                    setStyleProperty(element, 'animation-play-state', 'running');\n                }\n            });\n        });\n        if (_keyframes.length === 0 || elements.length === 0) {\n            animationFinish();\n        }\n        else {\n            /**\n             * This is a catchall in the event that a CSS Animation did not finish.\n             * The Web Animations API has mechanisms in place for preventing this.\n             * CSS Animations will not fire an `animationend` event\n             * for elements with `display: none`. The Web Animations API\n             * accounts for this, but using raw CSS Animations requires\n             * this workaround.\n             */\n            const animationDelay = getDelay() || 0;\n            const animationDuration = getDuration() || 0;\n            const animationIterations = getIterations() || 1;\n            // No need to set a timeout when animation has infinite iterations\n            if (isFinite(animationIterations)) {\n                cssAnimationsTimerFallback = setTimeout(onAnimationEndFallback, animationDelay + (animationDuration * animationIterations) + ANIMATION_END_FALLBACK_PADDING_MS);\n            }\n            animationEnd(elements[0], () => {\n                clearCSSAnimationsTimeout();\n                /**\n                 * Ensure that clean up\n                 * is always done a frame\n                 * before the onFinish handlers\n                 * are fired. Otherwise, there\n                 * may be flickering if a new\n                 * animation is started on the same\n                 * element too quickly\n                 *\n                 * TODO: Is there a cleaner way to do this?\n                 */\n                raf(() => {\n                    clearCSSAnimationPlayState();\n                    raf(animationFinish);\n                });\n            });\n        }\n    };\n    const clearCSSAnimationPlayState = () => {\n        elements.forEach(element => {\n            removeStyleProperty(element, 'animation-duration');\n            removeStyleProperty(element, 'animation-delay');\n            removeStyleProperty(element, 'animation-play-state');\n        });\n    };\n    const playWebAnimations = () => {\n        webAnimations.forEach(animation => {\n            animation.play();\n        });\n        if (_keyframes.length === 0 || elements.length === 0) {\n            animationFinish();\n        }\n    };\n    const resetAnimation = () => {\n        if (supportsWebAnimations) {\n            setAnimationStep(0);\n            updateWebAnimation();\n        }\n        else {\n            updateCSSAnimation();\n        }\n    };\n    const play = (opts) => {\n        return new Promise(resolve => {\n            if (opts && opts.sync) {\n                shouldForceSyncPlayback = true;\n                onFinish(() => shouldForceSyncPlayback = false, { oneTimeCallback: true });\n            }\n            if (!initialized) {\n                initializeAnimation();\n            }\n            if (finished) {\n                resetAnimation();\n                finished = false;\n            }\n            if (shouldCalculateNumAnimations) {\n                numAnimationsRunning = childAnimations.length + 1;\n                shouldCalculateNumAnimations = false;\n            }\n            onFinish(() => resolve(), { oneTimeCallback: true });\n            childAnimations.forEach(animation => {\n                animation.play();\n            });\n            if (supportsWebAnimations) {\n                playWebAnimations();\n            }\n            else {\n                playCSSAnimations();\n            }\n        });\n    };\n    const stop = () => {\n        childAnimations.forEach(animation => {\n            animation.stop();\n        });\n        if (initialized) {\n            cleanUpElements();\n            initialized = false;\n        }\n        resetFlags();\n    };\n    const from = (property, value) => {\n        const firstFrame = _keyframes[0];\n        if (firstFrame !== undefined && (firstFrame.offset === undefined || firstFrame.offset === 0)) {\n            firstFrame[property] = value;\n        }\n        else {\n            _keyframes = [\n                { offset: 0, [property]: value },\n                ..._keyframes\n            ];\n        }\n        return ani;\n    };\n    const to = (property, value) => {\n        const lastFrame = _keyframes[_keyframes.length - 1];\n        if (lastFrame !== undefined && (lastFrame.offset === undefined || lastFrame.offset === 1)) {\n            lastFrame[property] = value;\n        }\n        else {\n            _keyframes = [\n                ..._keyframes,\n                { offset: 1, [property]: value }\n            ];\n        }\n        return ani;\n    };\n    const fromTo = (property, fromValue, toValue) => {\n        return from(property, fromValue).to(property, toValue);\n    };\n    return ani = {\n        parentAnimation,\n        elements,\n        childAnimations,\n        id,\n        animationFinish,\n        from,\n        to,\n        fromTo,\n        parent,\n        play,\n        pause,\n        stop,\n        destroy,\n        keyframes,\n        addAnimation,\n        addElement,\n        update,\n        fill,\n        direction,\n        iterations,\n        duration,\n        easing,\n        delay,\n        getWebAnimations,\n        getKeyframes,\n        getFill,\n        getDirection,\n        getDelay,\n        getIterations,\n        getEasing,\n        getDuration,\n        afterAddRead,\n        afterAddWrite,\n        afterClearStyles,\n        afterStyles,\n        afterRemoveClass,\n        afterAddClass,\n        beforeAddRead,\n        beforeAddWrite,\n        beforeClearStyles,\n        beforeStyles,\n        beforeRemoveClass,\n        beforeAddClass,\n        onFinish,\n        progressStart,\n        progressStep,\n        progressEnd\n    };\n};\n\nexport { createAnimation as c };\n"]},"metadata":{},"sourceType":"module"}